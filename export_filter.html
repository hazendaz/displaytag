<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.8.1 from src\site\markdown/export_filter.md at 04-29-2018 11:17
 | Rendered using Apache Maven Fluido Skin 1.7
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="Date-Revision-yyyymmdd" content="20180429" />
    <meta http-equiv="Content-Language" content="en" />
    <title>Display tag library &#x2013; Export filter? Whats that?</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-1.7.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script type="text/javascript" src="./js/apache-maven-fluido-1.7.min.js"></script>
<link href="../css/site.css" rel="stylesheet" />
  </head>
  <body class="topBarDisabled">
    <div class="container-fluid">
      <div id="banner">
        <div class="pull-left"><a href="http://www.displaytag.org" id="bannerLeft"><h2><span class="color-highlight">displaytag</span></h2>
</a></div>
        <div class="pull-right"></div>
        <div class="clear"><hr/></div>
      </div>

      <div id="breadcrumbs">
        <ul class="breadcrumb">
      <li class="pull-right"><span class="divider">|</span>
<a href="http://demo.displaytag.org/displaytag-examples-2.0" class="externalLink" title="Live examples">Live examples</a></li>
      <li class="pull-right"><a href="http://www.displaytag.org/20/download.html" class="externalLink" title="Download">Download</a></li>
        </ul>
      </div>
      <div class="row-fluid">
        <div id="leftColumn" class="span2">
          <div class="well sidebar-nav">
    <ul class="nav nav-list">
      <li class="nav-header">Reference</li>
    <li><a href="index.html" title="About"><span class="none"></span>About</a></li>
    <li><a href="install.html" title="Install"><span class="none"></span>Install</a></li>
    <li><a href="tlds.html" title="Tlds"><span class="none"></span>Tlds</a></li>
    <li><a href="displaytag/tagreference.html" title="Tag reference"><span class="none"></span>Tag reference</a></li>
    <li><a href="configuration.html" title="Configuration"><span class="none"></span>Configuration</a></li>
    <li class="active"><a href="#"><span class="none"></span>Export filter</a></li>
    <li><a href="migrating.html" title="Migrating from 1.x"><span class="none"></span>Migrating from 1.x</a></li>
    <li><a href="faq.html" title="FAQ"><span class="none"></span>FAQ</a></li>
    <li><a href="portlet.html" title="Jsr-168 Portlet support"><span class="none"></span>Jsr-168 Portlet support</a></li>
      <li class="nav-header">Tutorial</li>
    <li><a href="tut_basic.html" title="Basic usage"><span class="none"></span>Basic usage</a></li>
    <li><a href="tut_implicitobjects.html" title="Implicit objects"><span class="none"></span>Implicit objects</a></li>
    <li><a href="tut_sources.html" title="Data sources"><span class="none"></span>Data sources</a></li>
    <li><a href="tut_decorators.html" title="Decorators"><span class="none"></span>Decorators</a></li>
    <li><a href="tut_links.html" title="Links"><span class="none"></span>Links</a></li>
    <li><a href="tut_style.html" title="Style"><span class="none"></span>Style</a></li>
    <li><a href="export.html" title="Export"><span class="none"></span>Export</a></li>
    <li><a href="i18n.html" title="I18n"><span class="none"></span>I18n</a></li>
    <li><a href="tut_externalSortAndPage.html" title="External paging/sorting"><span class="none"></span>External paging/sorting</a></li>
      <li class="nav-header">Project Info</li>
    <li><a href="dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="issue-tracking.html" title="Issue Tracking"><span class="none"></span>Issue Tracking</a></li>
    <li><a href="mail-lists.html" title="Mailing Lists"><span class="none"></span>Mailing Lists</a></li>
    <li><a href="license.html" title="Project License"><span class="none"></span>Project License</a></li>
    <li><a href="team-list.html" title="Project Team"><span class="none"></span>Project Team</a></li>
    <li><a href="source-repository.html" title="Source Repository"><span class="none"></span>Source Repository</a></li>
      <li class="nav-header">Developers</li>
    <li><a href="coding_conventions.html" title="Coding Conventions"><span class="none"></span>Coding Conventions</a></li>
    <li><a href="source-repository.html" title="Source repository"><span class="none"></span>Source repository</a></li>
      <li class="nav-header">Project Reports</li>
    <li><a href="displaytag/tagreference.html" title="Tag reference"><span class="none"></span>Tag reference</a></li>
    <li><a href="displaytag/tlddoc/index.html" title="Taglibdoc documentation"><span class="none"></span>Taglibdoc documentation</a></li>
    <li><a href="changes-report.html" title="Changes Report"><span class="none"></span>Changes Report</a></li>
    <li><a href="displaytag/dependencies.html" title="Dependencies"><span class="none"></span>Dependencies</a></li>
    <li><a href="displaytag/apidocs/index.html" title="Javadoc"><span class="none"></span>Javadoc</a></li>
    <li><a href="displaytag/pmd.html" title="PMD"><span class="none"></span>PMD</a></li>
    <li><a href="displaytag/clover/index.html" title="Clover"><span class="none"></span>Clover</a></li>
    <li><a href="displaytag/surefire-report.html" title="Maven Surefire Report"><span class="none"></span>Maven Surefire Report</a></li>
    <li><a href="displaytag/xref/index.html" title="Source Xref"><span class="none"></span>Source Xref</a></li>
    <li><a href="displaytag/xref-text/index.html" title="Test Xref"><span class="none"></span>Test Xref</a></li>
    <li><a href="displaytag/jdepend-report.html" title="JDepend Report"><span class="none"></span>JDepend Report</a></li>
    <li><a href="displaytag/taglibvalidation.html" title="Tag library validation"><span class="none"></span>Tag library validation</a></li>
</ul>
          <hr />
          <div id="poweredBy">
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
            <div class="clear"></div>
<a href="http://maven.apache.org/" title="Built by Maven" class="poweredBy"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </div>
        <div id="bodyColumn"  class="span10" >
<div class="section">
<h2><a name="Export_filter.3F_What.E2.80.99s_that.3F"></a>Export filter? What&#x2019;s that?</h2>
<p>When displaytag exports data in any non-html format, it needs to change the content type returned to the browser and reset any other content generated by the surrounding page.</p>
<p>Sometimes this can&#x2019;t be done: if content has already been sent back to the user, the response can&#x2019;t be reset and you get an error. This could happen because:</p>
<ul>

<li>Too many chars have been already written to the response, so that the response buffer was full and response has been automatically flushed.</li>
<li>Something (tags? java snippets?) before the <tt>&lt;display:table&gt;</tt> tag has explicitely flushed the response (<tt>response.flushBuffer()</tt>).</li>
<li>Your page is dynamically included into another page. This happens for example using Struts tiles.</li>
</ul>
<p>Another problem is related to exporting binary files. The output of binary data is not supported in jsps: it may work on some application server, but it may end up with errors in others. Because of this restriction an &#x201c;external help&#x201d; may be required. CSV, XML and text-based Excel formats don&#x2019;t require a binary output, but if you want to try PDF, POI-based Excel, or some other custom binary format you may encounter problems.</p>
<div class="section">
<h3><a name="The_solution"></a>The solution</h3>
<p>The first attempt can be using a larger page buffer in your jsp pages, for example: <tt>&lt;%@ page buffer = &quot;16kb&quot; %/</tt>&gt; However, this can work only if you are in the first situation listed above.</p>
<p>In j2ee 1.3/jsp 1.2 containers, you can take advantage of filters to solve the problem. Displaytag ships with a filter that works together with the table tag during export, disallowing the flushing the response when export has been requested.</p></div>
<div class="section">
<h3><a name="Installing_the_export_filter"></a>Installing the export filter</h3>
<p>Configure the Filter in your web.xml:</p>

<div>
<div>
<pre class="source">  &lt;filter&gt;
    &lt;filter-name&gt;ResponseOverrideFilter&lt;/filter-name&gt;
    &lt;filter-class&gt;org.displaytag.filter.ResponseOverrideFilter&lt;/filter-class&gt;
  &lt;/filter&gt;
</pre></div></div>

<p>And add mappings for urls the filter will intercept, for example:</p>

<div>
<div>
<pre class="source">      &lt;filter-mapping&gt;
        &lt;filter-name&gt;ResponseOverrideFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;*.do&lt;/url-pattern&gt;
      &lt;/filter-mapping&gt;
      &lt;filter-mapping&gt;
        &lt;filter-name&gt;ResponseOverrideFilter&lt;/filter-name&gt;
        &lt;url-pattern&gt;*.jsp&lt;/url-pattern&gt;
      &lt;/filter-mapping&gt;
</pre></div></div></div></div>
        </div>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Copyright &copy;2002&#x2013;2018
<a href="http://sourceforge.net/projects/displaytag">the Displaytag team</a>.
All rights reserved.        <li id="publishDate" class="pull-right">Last Published: 04-29-2018 11:17</li>
          <li id="projectVersion" class="pull-right"><span class="divider">|</span>Version: 2.2.1-SNAPSHOT</li>
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
